#!/usr/bin/env ruby

$LOAD_PATH.unshift 'lib'

require 'methadone'

class App
  include Methadone::Main
  include Methadone::CLILogging

  main do |file_name, account|
    require ::File.expand_path('../../config/environment', __FILE__)
    require 'loader'
    
    if ENV['DEBUG'] || options[:debug]
      Loader.enable_logging
    end
    Loader.load file_name, account
  end

  arg :file_name
  arg :account

  on("--debug")

  go!
end
